class DebugLogging{constructor(...e){this._flag=!1,this._label="debug";for(const[t,n]of e.entries())if(t<2)switch(typeof n){case"boolean":this._flag=n;break;case"string":this._label=n}}get flag(){return this._flag}set flag(e){"boolean"==typeof e&&(this._flag=e)}get label(){return this._label}set label(e){"string"==typeof e&&(this._label=e)}log(e,t){const n=t?"\n":"";console.log(`${n}[${this._label}] ${e}`)}tag(e,t){if(e&&e.tagName){const n=e.textContent.trim().replace(/\s+/g," ");this.log(`[${e.tagName}]: ${n.substring(0,40)}`,t)}}separator(e){this.log("-----------------------------",e)}}const debug$5=new DebugLogging("style",!1),styleTemplate=document.createElement("template");function getTheme(e,t){return"object"==typeof e[t.colorTheme]?e[t.colorTheme]:e.default}function updateStyle(e,t,n){debug$5.flag&&debug$5.log(`[updateStyle]: ${e} ${t} ${n}`),"string"==typeof t&&0!==t.length||(t=n);let o=styleTemplate.innerHTML,i=o.indexOf(e),a=i+e.length;for(debug$5.flag&&debug$5.log(`[updateStyle]: ${i} ${a}`);i>=0&&a<o.length;)a=(i=(o=o.substring(0,i)+t+o.substring(a)).indexOf(e,a))+e.length;styleTemplate.innerHTML=o,debug$5.flag&&debug$5.log(`[updateStyle]: ${styleTemplate.innerHTML}`)}function addCSSColors(e,t){const n=getTheme(e,t);updateStyle("$fontFamily",t.fontFamily,n.fontFamily),updateStyle("$fontSize",t.fontSize,n.fontSize),updateStyle("$positionLeft",t.positionLeft,n.positionLeft),updateStyle("$menuTextColor",t.menuTextColor,n.menuTextColor),updateStyle("$menuBackgroundColor",t.menuBackgroundColor,n.menuBackgroundColor),updateStyle("$menuitemFocusTextColor",t.menuitemFocusTextColor,n.menuitemFocusTextColor),updateStyle("$menuitemFocusBackgroundColor",t.menuitemFocusBackgroundColor,n.menuitemFocusBackgroundColor),updateStyle("$focusBorderColor",t.focusBorderColor,n.focusBorderColor),updateStyle("$buttonTextColor",t.buttonTextColor,n.buttonTextColor),updateStyle("$buttonBackgroundColor",t.buttonBackgroundColor,n.buttonBackgroundColor)}function renderStyleElement(e,t,n){debug$5.flag&&debug$5.log("[renderStyleElement]"),addCSSColors(e,t);const o=styleTemplate.content.cloneNode(!0);document.getElementsByTagName("head")[0].appendChild(o),o.id=n}styleTemplate.innerHTML='\n<style type="text/css">\nnav#id-skip-to.popup {\n  position: absolute;\n  top: -30em;\n  left: 0;\n}\n\nnav#id-skip-to,\nnav#id-skip-to.popup.focus {\n  position: absolute;\n  top: 0;\n  left: $positionLeft;\n  font-family: $fontFamily;\n  font-size: $fontSize;\n  display: block;\n  borders: none;\n}\n\nnav#id-skip-to.fixed {\n  position: fixed;\n}\n\nnav#id-skip-to button {\n  position: relative;\n  margin: 0;\n  padding: 6px 8px 6px 8px;\n  border-width: 0px 1px 1px 1px;\n  border-style: solid;\n  border-radius: 0px 0px 6px 6px;\n  border-color: $buttonBackgroundColor;\n  color: $menuTextColor;\n  background-color: $buttonBackgroundColor;\n  z-index: 100000 !important;\n  font-family: $fontFamily;\n  font-size: $fontSize;\n}\n\nnav#id-skip-to [role="menu"] {\n  position: absolute;\n  min-width: 17em;\n  display: none;\n  margin: 0;\n  padding: 0.25rem;\n  background-color: $menuBackgroundColor;\n  border-width: 2px;\n  border-style: solid;\n  border-color: $focusBorderColor;\n  border-radius: 5px;\n  z-index: 100000 !important;\n  overflow-x: hidden;\n}\n\nnav#id-skip-to [role="group"] {\n  display: grid;\n  grid-auto-rows: min-content;\n  grid-row-gap: 1px;\n}\n\nnav#id-skip-to [role="separator"]:first-child {\n  border-radius: 5px 5px 0 0;\n}\n\nnav#id-skip-to [role="menuitem"] {\n  padding: 3px;\n  width: auto;\n  border-width: 0px;\n  border-style: solid;\n  color: $menuTextColor;\n  background-color: $menuBackgroundColor;\n  z-index: 100000 !important;\n  display: grid;\n  overflow-y: clip;\n  grid-template-columns: repeat(6, 1.2rem) 1fr;\n  grid-column-gap: 2px;\n  font-size: 1em;\n}\n\nnav#id-skip-to [role="menuitem"] .level,\nnav#id-skip-to [role="menuitem"] .label {\n  font-size: 100%;\n  font-weight: normal;\n  color: $menuTextColor;\n  display: inline-block;\n  background-color: $menuBackgroundColor;\n  line-height: inherit;\n  display: inline-block;\n}\n\nnav#id-skip-to [role="menuitem"] .level {\n  text-align: right;\n  padding-right: 4px;\n}\n\nnav#id-skip-to [role="menuitem"] .label {\n  text-align: left;\n  margin: 0;\n  padding: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\nnav#id-skip-to [role="menuitem"] .level:first-letter,\nnav#id-skip-to [role="menuitem"] .label:first-letter {\n  text-decoration: underline;\n  text-transform: uppercase;\n}\n\n\nnav#id-skip-to [role="menuitem"].skip-to-h1 .level { grid-column: 1; }\nnav#id-skip-to [role="menuitem"].skip-to-h2 .level { grid-column: 2; }\nnav#id-skip-to [role="menuitem"].skip-to-h3 .level { grid-column: 3; }\nnav#id-skip-to [role="menuitem"].skip-to-h4 .level { grid-column: 4; }\nnav#id-skip-to [role="menuitem"].skip-to-h5 .level { grid-column: 5; }\nnav#id-skip-to [role="menuitem"].skip-to-h6 .level { grid-column: 8;}\n\nnav#id-skip-to [role="menuitem"].skip-to-h1 .label { grid-column: 2 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h2 .label { grid-column: 3 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h3 .label { grid-column: 4 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h4 .label { grid-column: 5 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h5 .label { grid-column: 6 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h6 .label { grid-column: 7 / 8;}\n\nnav#id-skip-to [role="menuitem"].skip-to-h1.no-level .label { grid-column: 1 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h2.no-level .label { grid-column: 2 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h3.no-level .label { grid-column: 3 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h4.no-level .label { grid-column: 4 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h5.no-level .label { grid-column: 5 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-h6.no-level .label { grid-column: 6 / 8; }\n\nnav#id-skip-to [role="menuitem"].skip-to-nesting-level-1 .nesting { grid-column: 1; }\nnav#id-skip-to [role="menuitem"].skip-to-nesting-level-2 .nesting { grid-column: 2; }\nnav#id-skip-to [role="menuitem"].skip-to-nesting-level-3 .nesting { grid-column: 3; }\n\nnav#id-skip-to [role="menuitem"].skip-to-nesting-level-0 .label { grid-column: 1 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-nesting-level-1 .label { grid-column: 2 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-nesting-level-2 .label { grid-column: 3 / 8; }\nnav#id-skip-to [role="menuitem"].skip-to-nesting-level-3 .label { grid-column: 4 / 8; }\n\nnav#id-skip-to [role="menuitem"].no-items .label,\nnav#id-skip-to [role="menuitem"].action .label {\n  grid-column: 1 / 8;\n}\n\nnav#id-skip-to [role="separator"] {\n  margin: 1px 0px 1px 0px;\n  padding: 3px;\n  display: block;\n  width: auto;\n  font-weight: bold;\n  border-bottom-width: 1px;\n  border-bottom-style: solid;\n  border-bottom-color: $menuTextColor;\n  background-color: $menuBackgroundColor;\n  color: $menuTextColor;\n  z-index: 100000 !important;\n}\n\nnav#id-skip-to [role="separator"] .mofn {\n  font-weight: normal;\n  font-size: 85%;\n}\n\nnav#id-skip-to [role="separator"]:first-child {\n  border-radius: 5px 5px 0 0;\n}\n\nnav#id-skip-to [role="menuitem"].last {\n  border-radius: 0 0 5px 5px;\n}\n\n/* focus styling */\n\nnav#id-skip-to.focus {\n  display: block;\n}\n\nnav#id-skip-to button:focus,\n.skip-to button:hover {\n  background-color: $menuBackgroundColor;\n  color: $menuTextColor;\n  outline: none;\n}\n\nnav#id-skip-to button:focus {\n  padding: 6px 7px 5px 7px;\n  border-width: 0px 2px 2px 2px;\n  border-color: $focusBorderColor;\n}\n\nnav#id-skip-to [role="menuitem"]:focus {\n  padding: 1px;\n  border-width: 2px;\n  border-style: solid;\n  border-color: $focusBorderColor;\n  background-color: $menuitemFocusBackgroundColor;\n  color: $menuitemFocusTextColor;\n  outline: none;\n}\n\nnav#id-skip-to [role="menuitem"]:focus .level,\nnav#id-skip-to [role="menuitem"]:focus .label {\n  background-color: $menuitemFocusBackgroundColor;\n  color: $menuitemFocusTextColor;\n}\n</style>\n';const debug$4=new DebugLogging("Utils",!1);function getAttributeValue(e,t){let n=e.getAttribute(t);return null===n?"":normalize(n)}function normalize(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/\s+/g," ")}function isNotEmptyString(e){return"string"==typeof e&&e.length&&e.trim()&&"&nbsp;"!==e}function isVisible$1(e){return function e(t){if(1!==t.parentNode.nodeType||"BODY"===t.parentNode.tagName)return!0;const n=window.getComputedStyle(t),o=n.getPropertyValue("display"),i=n.getPropertyValue("visibility"),a=t.getAttribute("hidden");return"none"!==o&&"hidden"!==i&&null===a&&e(t.parentNode)}(e)}debug$4.flag=!1;const debug$3=new DebugLogging("nameFrom",!1);function isHeadingElement(e){switch(e.tagName.toLowerCase()){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return!0;default:return!1}}function getElementContents(e){let t="";if(isVisible(e)){if(e.hasChildNodes()){let n=e.childNodes,o=[];for(let e=0;e<n.length;e++){let t=getNodeContents(n[e]);t.length&&o.push(t)}t=o.length?o.join(" "):""}return addCssGeneratedContent(e,t)}return""}function nameFromAttribute(e,t){let n;return(n=getAttributeValue(e,t)).length?n:""}function isHidden(e){if(!e)return!1;if(e.nodeType!==Node.ELEMENT_NODE)return e.nodeType===Node.TEXT_NODE&&e.parentNode.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode),!1;if(e.hasAttribute("hidden"))return!0;if(e.hasAttribute("aria-hidden"))return"true"===e.getAttribute("aria-hidden").toLowerCase();return"none"===window.getComputedStyle(e,null).getPropertyValue("display")||!!e.parentNode&&isHidden(e.parentNode)}function isVisible(e){return!isHidden(e)}function isHiddenCSSVisibilityProp(e){if(!e)return!1;if(e.nodeType!==Node.ELEMENT_NODE)return e.nodeType===Node.TEXT_NODE&&e.parentNode.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode),!1;const t=window.getComputedStyle(e,null).getPropertyValue("visibility");return t?"hidden"===t||"collapse"===t:!!e.parentNode&&isHidden(e.parentNode)}function getNodeContents(e){let t,n="",o=[];if(isHidden(e))return"";switch(e.nodeType){case Node.ELEMENT_NODE:if(e instanceof HTMLSlotElement){(e.assignedNodes().length?e.assignedNodes():e.assignedNodes({flatten:!0})).forEach(e=>{(t=getNodeContents(e)).length&&o.push(t)}),n=o.length?o.join(" "):""}else if(couldHaveAltText(e))n=getAttributeValue(e,"alt");else if(e.hasChildNodes()){Array.from(e.childNodes).forEach(e=>{(t=getNodeContents(e)).length&&o.push(t)}),n=o.length?o.join(" "):""}n=addCssGeneratedContent(e,n);break;case Node.TEXT_NODE:isHiddenCSSVisibilityProp(e.parentNode)||(n=normalize(e.textContent))}return n}function couldHaveAltText(e){switch(e.tagName.toLowerCase()){case"img":case"area":return!0;case"input":return e.type&&"image"===e.type}return!1}function addCssGeneratedContent(e,t){let n=t,o=getComputedStyle(e,":before").content,i=getComputedStyle(e,":after").content;return"none"!==o&&(n=o+n),"none"!==i&&(n+=i),n}debug$3.flag=!1;const debug$2=new DebugLogging("accName",!1);function getAccessibleName(e,t,n=!1){let o="";return n||(o=nameFromAttributeIdRefs(e,t,"aria-labelledby")),""===o&&(o=nameFromAttribute(t,"aria-label")),(""===o&&isHeadingElement(t)||n)&&(o=getElementContents(t),debug$2.flag&&debug$2.log(`[getElementContents]: ${getElementContents(t)}`)),o}function nameFromAttributeIdRefs(e,t,n){const o=getAttributeValue(t,n),i=[];if(o.length){debug$2.flag&&debug$2.log(`[nameFromAttributeIdRefs][value]: ${o}`);const t=o.split(" ");for(let n=0;n<t.length;n++){const o=e.getElementById(t[n]);if(debug$2.flag&&debug$2.log(`[nameFromAttributeIdRefs][refElement]: ${o}`),o){const t=getAccessibleName(e,o,!0);debug$2.flag&&debug$2.log(`[nameFromAttributeIdRefs][accName]: ${t}`),t&&t.length&&i.push(t)}}}return i.length?i.join(" "):""}debug$2.flag=!0;const debug$1=new DebugLogging("landmarksHeadings",!1);debug$1.flag=!0;const skipableElements=["base","content","frame","iframe","input[type=hidden]","link","meta","noscript","script","style","template","shadow","title"],allowedLandmarkSelectors=["banner","complementary","contentinfo","form","main","navigation","region","search"],higherLevelElements=["article","aside","footer","header","main","nav","region","section"];let idIndex=0;function getSkipToIdIndex(){return idIndex}function incSkipToIdIndex(){idIndex+=1}function isSkipableElement(e,t){const n="input"===e&&"string"==typeof t?`${e}[type=${t}]`:e;return skipableElements.includes(n)}function isCustomElement(e){return e.indexOf("-")>=0}function isSlotElement(e){return e instanceof HTMLSlotElement}function isTopLevel(e){for(e=e&&e.parentNode;e&&e.nodeType===Node.ELEMENT_NODE;){const t=e.tagName.toLowerCase();let n=e.getAttribute("role");if(n&&(n=n.toLowerCase()),higherLevelElements.includes(t)||allowedLandmarkSelectors.includes(n))return!1;e=e.parentNode}return!0}function checkForLandmark(e){if(e.hasAttribute("role")){const t=e.getAttribute("role").toLowerCase();if(allowedLandmarkSelectors.indexOf(t)>=0)return t}else{switch(e.tagName.toLowerCase()){case"aside":return"complementary";case"main":return"main";case"nav":return"navigation";case"header":if(isTopLevel(e))return"banner";break;case"footer":if(isTopLevel(e))return"contentinfo";break;case"section":if(e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby"))return"region"}}return""}function queryDOMForSkipToId(e){return function t(n){var o=null;for(let i=n.firstChild;null!==i;i=i.nextSibling)if(i.nodeType===Node.ELEMENT_NODE){const n=i.tagName.toLowerCase();if(i.getAttribute("data-skip-to-id")===e)return i;if(!isSkipableElement(n,i.getAttribute("type")))if(isSlotElement(i)){const t=i.assignedNodes().length?i.assignedNodes():i.assignedNodes({flatten:!0});for(let n=0;n<t.length;n+=1){const o=t[n];if(o.nodeType===Node.ELEMENT_NODE&&o.getAttribute("data-skip-to-id")===e)return o}}else if(isCustomElement(n)){if(i.shadowRoot&&(o=t(i.shadowRoot)))return o}else if(o=t(i))return o}return!1}(document.body)}function findVisibleElement(e,t){function n(e,t){var o=null;for(let i=e.firstChild;null!==i;i=i.nextSibling)if(i.nodeType===Node.ELEMENT_NODE){const e=i.tagName.toLowerCase();if(e===t&&isVisible$1(i))return i;if(!isSkipableElement(e,i.getAttribute("type")))if(isSlotElement(i)){const e=i.assignedNodes().length?i.assignedNodes():i.assignedNodes({flatten:!0});for(let n=0;n<e.length;n+=1){const o=e[n];if(o.nodeType===Node.ELEMENT_NODE&&o.tagName.toLowerCase()===t&&isVisible$1(o))return o}}else if(isCustomElement(e)){if(i.shadowRoot&&(o=n(i.shadowRoot,t)))return o}else if(o=n(i,t))return o}return e}let o=e;for(let i=0;i<t.length&&(o=n(e,t[i]))===e;i+=1);return o}function skipToElement(e){let t,n=!1,o=!1;const i=["input","button","a"],a=["a","input","button"],s=["h1","h2","h3","h4","h5","h6","section","article","p","li","a"],r=e.classList.contains("landmark"),l=e.classList.contains("skip-to-search"),d=e.classList.contains("skip-to-nav");(t=queryDOMForSkipToId(e.getAttribute("data-id")))&&(l&&(n=findVisibleElement(t,i)),d&&(n=findVisibleElement(t,a)),n&&isVisible$1(n)?(n.focus(),n.scrollIntoView({block:"nearest"})):(r&&(o=findVisibleElement(t,s))&&(t=o),t.tabIndex=-1,t.focus(),t.scrollIntoView({block:"center"})))}function getHeadingTargets(e){let t=[];return["h1","h2","h3","h4","h5","h6"].forEach(n=>{e.includes(n)&&t.push(n)}),t}function queryDOMForLandmarksAndHeadings(e,t){let n=[],o=[],i=getLandmarkTargets(e.toLowerCase()),a=getHeadingTargets(t.toLowerCase()),s=t.includes("main");function r(e,t,l=!1){for(let d=e.firstChild;null!==d;d=d.nextSibling)if(d.nodeType===Node.ELEMENT_NODE){const e=d.tagName.toLowerCase();if(i.indexOf(checkForLandmark(d))>=0&&(o.push({node:d,name:getAccessibleName(t,d)}),debug$1.flag&&debug$1.log(`[transverseDOM]: ${e}[role=${d.getAttribute("role")}][aria-labelledby=${d.getAttribute("aria-labelledby")}]`,1),debug$1.flag&&debug$1.log(`[transverseDOM][accName]: ${getAccessibleName(t,d)}]`)),a.indexOf(e)>=0&&(s&&!l||n.push({node:d,name:getAccessibleName(t,d)})),("main"===e||d.hasAttribute("role")&&"role"===d.getAttribute("role").toLowerCase)&&(l=!0),!isSkipableElement(e,d.getAttribute("type")))if(isSlotElement(d)){const e=d.assignedNodes().length?d.assignedNodes():d.assignedNodes({flatten:!0});for(let r=0;r<e.length;r+=1){const u=e[r];if(u.nodeType===Node.ELEMENT_NODE){const c=e[r].tagName.toLowerCase();i.indexOf(checkForLandmark(d))>=0&&o.push({node:d,name:getAccessibleName(t,d)}),a.indexOf(c)>=0&&(s&&!l||n.push({node:u,name:getAccessibleName(t,u)}))}}}else isCustomElement(e)?d.shadowRoot&&r(d.shadowRoot,d.shadowRoot,l):r(d,t,l)}}return r(document.body,document),0===n.length&&s&&(s=!1,r(document.body,document)),[o,n]}function getLandmarksAndHeadings(e){let t=e.landmarks;"string"!=typeof t&&(t="main search navigation");let n=e.headings;"string"!=typeof n&&(n="h1 h2");const[o,i]=queryDOMForLandmarksAndHeadings(t,n);return[getLandmarks(e,o),getHeadings(e,i)]}function getHeadings(e,t){let n,o,i=[];debug$1.flag&&debug$1.log(`[getHeadings][headings]: ${t.length}`);for(let a=0,s=t.length;a<s;a+=1){let s=t[a];debug$1.flag&&debug$1.log(`[getHeadings][${a}]: ${s.node.tagName}: ${s.name}`);let r=s.node.getAttribute("role");if(("string"!=typeof r||"presentation"!==r)&&(isVisible$1(s.node)&&isNotEmptyString(s.node.innerHTML))){s.node.hasAttribute("data-skip-to-id")?n=s.node.getAttribute("data-skip-to-id"):(n=getSkipToIdIndex(),s.node.setAttribute("data-skip-to-id",n)),o=s.node.tagName.substring(1);const t={};t.dataId=n.toString(),t.class="heading",t.name=s.name,t.ariaLabel=t.name+", ",t.ariaLabel+=e.headingLevelLabel+" "+o,t.tagName=s.node.tagName.toLowerCase(),t.role="heading",t.level=o,i.push(t),incSkipToIdIndex()}}return i}function getLocalizedLandmarkName(e,t,n){let o;switch(t){case"aside":o=e.asideLabel;break;case"footer":o=e.footerLabel;break;case"form":o=e.formLabel;break;case"header":o=e.headerLabel;break;case"main":o=e.mainLabel;break;case"nav":o=e.navLabel;break;case"section":case"region":o=e.regionLabel;break;case"search":o=e.searchLabel;break;default:o=t}return isNotEmptyString(n)&&(o+=": "+n),o}function getLandmarkTargets(e){let t=[];return(e=e.toLowerCase()).includes("main")&&t.push("main"),e.includes("search")&&t.push("search"),e.includes("nav")&&t.push("navigation"),(e.includes("complementary")||e.includes("aside"))&&t.push("complemntary"),(e.includes("banner")||e.includes("header"))&&t.push("banner"),(e.includes("contentinfo")||e.includes("footer"))&&t.push("contentinfo"),(e.includes("region")||e.includes("section"))&&t.push("region"),t}function getLandmarks(e,t){let n=[],o=[],i=[],a=[],s=[],r=[],l=[],d="";for(let u=0,c=t.length;u<c;u+=1){let c=t[u];if("id-skip-to"===c.node.id)continue;let m=c.node.getAttribute("role"),p=c.node.tagName.toLowerCase();if(("string"!=typeof m||"presentation"!==m)&&isVisible$1(c.node)){switch(m||(m=p),m){case"banner":p="header";break;case"complementary":p="aside";break;case"contentinfo":p="footer";break;case"form":p="form";break;case"main":p="main";break;case"navigation":p="nav";break;case"region":p="section";break;case"search":p="search"}["aside","footer","form","header","main","nav","section","search"].indexOf(p)<0&&(p="main"),c.node.hasAttribute("aria-roledescription")&&(p=c.node.getAttribute("aria-roledescription").trim().replace(" ","-")),c.node.hasAttribute("data-skip-to-id")?d=c.node.getAttribute("data-skip-to-id"):(d=getSkipToIdIndex(),c.node.setAttribute("data-skip-to-id",d));const t={};switch(t.dataId=d.toString(),t.class="landmark",t.hasName=c.name.length>0,t.name=getLocalizedLandmarkName(e,p,c.name),t.tagName=p,t.nestingLevel=0,incSkipToIdIndex(),p){case"main":n.push(t);break;case"search":o.push(t);break;case"nav":i.push(t);break;case"aside":a.push(t);break;case"footer":s.push(t);break;case"section":t.hasName&&r.push(t);break;default:l.push(t)}}}return[].concat(n,o,i,a,r,s,l)}const debug=new DebugLogging("SkipToButton",!1);debug.flag=!1;const menuButtonTemplate=document.createElement("template");menuButtonTemplate.innerHTML='\n  <nav id="id-skip-to" arial0label-"Skip To Content">\n    <button\n      aria-label="Skip to content, shortcut alt plus zero"\n      aria-haspopup="true"\n      aria-expanded="false"\n      aria-controls="id-skip-to-menu">\n      Skip To Content (ALT+0)\n    </button> \n    <div id="id-skip-to-menu" \n      role="menu"\n      aria-label="Landmarks and Headings"\n      aria-busy="false">\n      \n      <div id="id-skip-to-menu-landmark-group-label" \n        role="separator">\n        Landmarks\n      </div>\n      \n      <div id="id-skip-to-menu-landmark-group"\n         role="group"\n         aria-labelledby="id-skip-to-menu-landmark-group-label">\n      </div>\n      \n      <div id="id-skip-to-menu-heading-group-label" \n        role="separator">\n        Headings\n      </div>\n      \n      <div id="id-skip-to-menu-heading-group"\n         role="group"\n         aria-labelledby="id-skip-to-menu-heading-label">\n      </div>\n    </div>\n  </nav>\n';class SkiptoMenuButton{constructor(e,t){this.config=t;const n=menuButtonTemplate.content.cloneNode(!0);e.appendChild(n),this.containerNode=e.querySelector("nav"),this.containerNode.setAttribute("aria-label",t.buttonLabel),isNotEmptyString(t.customClass)&&this.containerNode.classList.add(t.customClass);let o=t.displayOption;if("string"==typeof o&&(o=o.trim().toLowerCase()).length)switch(t.displayOption){case"fixed":this.containerNode.classList.add("fixed");break;case"onfocus":case"popup":this.containerNode.classList.add("popup")}const[i,a]=this.getBrowserSpecificShortcut(t);return this.buttonNode=this.containerNode.querySelector("button"),this.buttonNode.textContent=i,this.buttonNode.setAttribute("aria-label",a),this.buttonNode.addEventListener("keydown",this.handleButtonKeydown.bind(this)),this.buttonNode.addEventListener("click",this.handleButtonClick.bind(this)),this.menuNode=this.containerNode.querySelector("[role=menu]"),this.menuNode.setAttribute("aria-label",t.menuLabel),this.menuNode.setAttribute("aria-busy","true"),this.menuNode.querySelector("#id-skip-to-menu-landmark-group-label").textContent=this.config.landmarkGroupLabel,this.menuNode.querySelector("#id-skip-to-menu-heading-group-label").textContent=this.config.headingGroupLabel,this.landmarkGroupNode=this.menuNode.querySelector("#id-skip-to-menu-landmark-group"),this.headingGroupNode=this.menuNode.querySelector("#id-skip-to-menu-heading-group"),this.containerNode.addEventListener("focusin",this.handleFocusin.bind(this)),this.containerNode.addEventListener("focusout",this.handleFocusout.bind(this)),window.addEventListener("pointerdown",this.handleBackgroundPointerdown.bind(this),!0),(this.usesAltKey||this.usesOptionKey)&&document.addEventListener("keydown",this.handleDocumentKeydown.bind(this)),e.appendChild(this.containerNode),this.containerNode}getBrowserSpecificShortcut(e){const t=navigator.platform.toLowerCase(),n=navigator.userAgent.toLowerCase(),o=t.indexOf("win")>=0,i=t.indexOf("mac")>=0,a=t.indexOf("linux")>=0||t.indexOf("bsd")>=0,s=n.indexOf("android")>=0;this.usesAltKey=o||a&&!s,this.usesOptionKey=i;let r,l=e.buttonLabel,d=e.buttonLabel;return e.altShortcut&&e.optionShortcut&&((this.usesAltKey||this.usesOptionKey)&&(r=e.buttonShortcut.replace("$key",e.altShortcut)),this.usesAltKey&&(l+=r=r.replace("$modifier",e.altLabel),d=e.altButtonAriaLabel.replace("$key",e.altShortcut)),this.usesOptionKey&&(l+=r=r.replace("$modifier",e.optionLabel),d=e.optionButtonAriaLabel.replace("$key",e.altShortcut))),[l,d]}getFirstChar(e){const t=e.querySelector(".label");return t&&isNotEmptyString(t.textContent)?t.textContent.trim()[0].toLowerCase():""}getHeadingLevelFromAttribute(e){return e.hasAttribute("data-level")?e.getAttribute("data-level"):""}updateKeyboardShortCuts(){let e;this.firstChars=[],this.headingLevels=[];for(let t=0;t<this.menuitemNodes.length;t+=1)e=this.menuitemNodes[t],this.firstChars.push(this.getFirstChar(e)),this.headingLevels.push(this.getHeadingLevelFromAttribute(e))}updateMenuitems(){let e=this.menuNode.querySelectorAll("[role=menuitem");this.menuitemNodes=[];for(let t=0;t<e.length;t+=1)this.menuitemNodes.push(e[t]);this.firstMenuitem=this.menuitemNodes[0],this.lastMenuitem=this.menuitemNodes[this.menuitemNodes.length-1],this.lastMenuitem.classList.add("last"),this.updateKeyboardShortCuts()}renderMenuitemToGroup(e,t){let n,o,i,a,s=document.createElement("div");return s.setAttribute("role","menuitem"),s.classList.add(t.class),isNotEmptyString(t.tagName)&&s.classList.add("skip-to-"+t.tagName.toLowerCase()),s.setAttribute("data-id",t.dataId),s.tabIndex=-1,isNotEmptyString(t.ariaLabel)&&s.setAttribute("aria-label",t.ariaLabel),s.addEventListener("keydown",this.handleMenuitemKeydown.bind(this)),s.addEventListener("click",this.handleMenuitemClick.bind(this)),s.addEventListener("pointerenter",this.handleMenuitemPointerenter.bind(this)),e.appendChild(s),t.class.includes("heading")&&(this.config.enableHeadingLevelShortcuts?(n=document.createElement("span"),(o=document.createElement("span")).appendChild(document.createTextNode(t.level)),n.append(o),n.appendChild(document.createTextNode(")")),n.classList.add("level"),s.append(n)):s.classList.add("no-level"),s.setAttribute("data-level",t.level),isNotEmptyString(t.tagName)&&s.classList.add("skip-to-"+t.tagName)),t.class.includes("landmark")&&(s.setAttribute("data-nesting",t.nestingLevel),s.classList.add("skip-to-nesting-level-"+t.nestingLevel),t.nestingLevel>0&&t.nestingLevel>this.lastNestingLevel&&((a=document.createElement("span")).classList.add("nesting"),s.append(a)),this.lastNestingLevel=t.nestingLevel),(i=document.createElement("span")).appendChild(document.createTextNode(t.name)),i.classList.add("label"),s.append(i),s}renderMenuitemsToGroup(e,t,n){if(e.innerHTML="",this.lastNestingLevel=0,0===t.length){const t={};t.name=n,t.tagName="",t.class="no-items",t.dataId="",this.renderMenuitemToGroup(e,t)}else for(let n=0;n<t.length;n+=1)this.renderMenuitemToGroup(e,t[n])}renderMenu(){for(;this.landmarkGroupNode.lastElementChild;)this.landmarkGroupNode.removeChild(this.landmarkGroupNode.lastElementChild);for(;this.headingGroupNode.lastElementChild;)this.headingGroupNode.removeChild(this.headingGroupNode.lastElementChild);const[e,t]=getLandmarksAndHeadings(this.config);this.renderMenuitemsToGroup(this.landmarkGroupNode,e,this.config.msgNoLandmarksFound),this.renderMenuitemsToGroup(this.headingGroupNode,t,this.config.msgNoHeadingsFound),this.updateMenuitems()}setFocusToMenuitem(e){e&&e.focus()}setFocusToFirstMenuitem(){this.setFocusToMenuitem(this.firstMenuitem)}setFocusToLastMenuitem(){this.setFocusToMenuitem(this.lastMenuitem)}setFocusToPreviousMenuitem(e){let t,n;return e===this.firstMenuitem?t=this.lastMenuitem:(n=this.menuitemNodes.indexOf(e),t=this.menuitemNodes[n-1]),this.setFocusToMenuitem(t),t}setFocusToNextMenuitem(e){let t,n;return e===this.lastMenuitem?t=this.firstMenuitem:(n=this.menuitemNodes.indexOf(e),t=this.menuitemNodes[n+1]),this.setFocusToMenuitem(t),t}setFocusByFirstCharacter(e,t){let n,o;t.length>1||(t=t.toLowerCase(),(n=this.menuitemNodes.indexOf(e)+1)>=this.menuitemNodes.length&&(n=0),-1===(o=this.firstChars.indexOf(t,n))&&(o=this.headingLevels.indexOf(t,n)),-1===o&&(o=this.firstChars.indexOf(t,0)),-1===o&&(o=this.headingLevels.indexOf(t,0)),o>-1&&this.setFocusToMenuitem(this.menuitemNodes[o]))}getIndexFirstChars(e,t){for(let n=e;n<this.firstChars.length;n+=1)if(t===this.firstChars[n])return n;return-1}openPopup(){this.menuNode.setAttribute("aria-busy","true");const e=80*window.innerHeight/100;this.menuNode.style.maxHeight=e+"px",this.renderMenu(),this.menuNode.style.display="block",this.menuNode.removeAttribute("aria-busy"),this.buttonNode.setAttribute("aria-expanded","true")}closePopup(){this.isOpen()&&(this.buttonNode.setAttribute("aria-expanded","false"),this.menuNode.style.display="none")}isOpen(){return"true"===this.buttonNode.getAttribute("aria-expanded")}handleFocusin(){this.containerNode.classList.add("focus")}handleFocusout(){this.containerNode.classList.remove("focus")}handleButtonKeydown(e){let t=!1;switch(e.key){case" ":case"Enter":case"ArrowDown":case"Down":this.openPopup(),this.setFocusToFirstMenuitem(),t=!0;break;case"Esc":case"Escape":this.closePopup(),this.buttonNode.focus(),t=!0;break;case"Up":case"ArrowUp":this.openPopup(),this.setFocusToLastMenuitem(),t=!0}t&&(e.stopPropagation(),e.preventDefault())}handleButtonClick(e){this.isOpen()?(this.closePopup(),this.buttonNode.focus()):(this.openPopup(),this.setFocusToFirstMenuitem()),e.stopPropagation(),e.preventDefault()}handleDocumentKeydown(e){let t=e.key,n=!1,o=this.usesAltKey&&e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey;(this.usesOptionKey&&e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey&&this.config.optionShortcut===t||o&&this.config.altShortcut===t)&&(this.openPopup(),this.setFocusToFirstMenuitem(),n=!0),n&&(e.stopPropagation(),e.preventDefault())}handleMenuitemAction(e){switch(e.getAttribute("data-id")){case"":break;default:this.closePopup(),skipToElement(e)}}handleMenuitemKeydown(e){let t=e.currentTarget,n=e.key,o=!1;function i(e){return 1===e.length&&e.match(/\S/)}if(!(e.ctrlKey||e.altKey||e.metaKey)){if(e.shiftKey)i(n)&&(this.setFocusByFirstCharacter(t,n),o=!0),"Tab"===e.key&&(this.buttonNode.focus(),this.closePopup(),o=!0);else switch(n){case"Enter":case" ":this.handleMenuitemAction(t),o=!0;break;case"Esc":case"Escape":this.closePopup(),this.buttonNode.focus(),o=!0;break;case"Up":case"ArrowUp":this.setFocusToPreviousMenuitem(t),o=!0;break;case"ArrowDown":case"Down":this.setFocusToNextMenuitem(t),o=!0;break;case"Home":case"PageUp":this.setFocusToFirstMenuitem(),o=!0;break;case"End":case"PageDown":this.setFocusToLastMenuitem(),o=!0;break;case"Tab":this.closePopup();break;default:i(n)&&(this.setFocusByFirstCharacter(t,n),o=!0)}o&&(e.stopPropagation(),e.preventDefault())}}handleMenuitemClick(e){this.handleMenuitemAction(e.currentTarget),e.stopPropagation(),e.preventDefault()}handleMenuitemPointerenter(e){e.currentTarget.focus()}handleBackgroundPointerdown(e){this.containerNode.contains(e.target)||this.isOpen()&&(this.closePopup(),this.buttonNode.focus())}}!function(){const e={skipToId:"id-skip-to-js-50",skipToMenuId:"id-skip-to-menu-50",domNode:null,buttonNode:null,menuNode:null,menuitemNodes:[],firstMenuitem:!1,lastMenuitem:!1,firstChars:[],headingLevels:[],skipToIdIndex:1,config:{enableHeadingLevelShortcuts:!0,altShortcut:"0",optionShortcut:"º",attachElement:"header",displayOption:"static",containerElement:"div",containerRole:"",customClass:"",buttonLabel:"Skip To Content",altLabel:"Alt",optionLabel:"Option",buttonShortcut:" ($modifier+$key)",altButtonAriaLabel:"Skip To Content, shortcut Alt plus $key",optionButtonAriaLabel:"Skip To Content, shortcut Option plus $key",menuLabel:"Landmarks and Headings",landmarkGroupLabel:"Landmarks",headingGroupLabel:"Headings",headingLevelLabel:"Heading level",mainLabel:"main",searchLabel:"search",navLabel:"navigation",regionLabel:"region",asideLabel:"complementary",footerLabel:"contentinfo",headerLabel:"banner",formLabel:"form",msgNoLandmarksFound:"No landmarks found",msgNoHeadingsFound:"No headings found",landmarks:"main search navigation complementary",headings:"main h1 h2 h3",colorTheme:"",fontFamily:"",fontSize:"",positionLeft:"",menuTextColor:"",menuBackgroundColor:"",menuitemFocusTextColor:"",menuitemFocusBackgroundColor:"",focusBorderColor:"",buttonTextColor:"",buttonBackgroundColor:"",buttonTitle:"",buttonTitleWithAccesskey:"",enableActions:!1,actionGroupLabel:"",actionShowHeadingsHelp:"",actionShowSelectedHeadingsLabel:"",actionShowAllHeadingsLabel:"",actionShowLandmarksHelp:"",actionShowSelectedLandmarksLabel:"",actionShowAllLandmarksLabel:"",actionShowSelectedHeadingsAriaLabel:"",actionShowAllHeadingsAriaLabel:"",actionShowSelectedLandmarksAriaLabel:"",actionShowAllLandmarksAriaLabel:""},colorThemes:{default:{fontFamily:"inherit",fontSize:"inherit",positionLeft:"46%",menuTextColor:"#1a1a1a",menuBackgroundColor:"#dcdcdc",menuitemFocusTextColor:"#eeeeee",menuitemFocusBackgroundColor:"#1a1a1a",focusBorderColor:"#1a1a1a",buttonTextColor:"#1a1a1a",buttonBackgroundColor:"#eeeeee"},aria:{fontFamily:"sans-serif",fontSize:"10pt",positionLeft:"7%",menuTextColor:"#000",menuBackgroundColor:"#def",menuitemFocusTextColor:"#fff",menuitemFocusBackgroundColor:"#005a9c",focusBorderColor:"#005a9c",buttonTextColor:"#005a9c",buttonBackgroundColor:"#ddd"},illinois:{fontFamily:"inherit",fontSize:"inherit",positionLeft:"46%",menuTextColor:"#00132c",menuBackgroundColor:"#cad9ef",menuitemFocusTextColor:"#eeeeee",menuitemFocusBackgroundColor:"#00132c",focusBorderColor:"#ff552e",buttonTextColor:"#444444",buttonBackgroundColor:"#dddede"}},init:function(e){let t;if(document.querySelector("style#"+this.skipToId))return;let n=document.body;e&&this.setupConfig(e),"string"==typeof this.config.attachElement&&(t=document.querySelector(this.config.attachElement))&&t.nodeType===Node.ELEMENT_NODE&&(n=t),renderStyleElement(this.colorThemes,this.config,this.skipToId),new SkiptoMenuButton(n,this.config)},setupConfig:function(e){let t;t="object"==typeof e.settings&&"object"==typeof e.settings.skipTo?e.settings.skipTo:void 0===e||"object"!=typeof e?{}:e;for(const e in t)void 0!==this.config[e]&&("string"==typeof t[e]&&t[e].length>0||"boolean"==typeof t[e])?this.config[e]=t[e]:console.warn('[SkipTo]: Unsuported or deprecated configuration option "'+e+'".')}};window.addEventListener("load",function(){e.init(window.SkipToConfig||("object"==typeof window.Joomla&&"function"==typeof window.Joomla.getOptions?window.Joomla.getOptions("skipto-settings",{}):{}))})}();